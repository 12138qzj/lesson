<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    * {
        margin: 0;
        padding: 0;
    }
    
    .drag {
        position: absolute;
        top: 0;
        left: 0;
    }
</style>

<body>

    <div id="drag1" class="drag">
        h2
    </div>
    <div id="drag2" class="drag">
        sdfghjkljjhbfddfgbhjmkm
    </div>
    <script>
        // console.log("宽度", windowwidth, "高度", windowheight);

        function DragAble(selector) {
            const that = this;
            this.drag = document.querySelector(selector);
            this.dragSize = this.drag.getBoundingClientRect();

            this.drag.addEventListener('mousedown', this.mousedown.bind(this));
            console.log("内", this)
                //this.prototype.__proto__.that1 = this;
        }


        DragAble.prototype.event = function(e) {}


        // DragAble.prototype.mousemove = function mousemove(e) {
        //     if (e.clientY > windowheight) {
        //         that.drag.style.top = windowheight + 'px';
        //     }
        //     if (e.clientX > windowwidth) {
        //         that.drag.style.left = windowwidth + 'px';
        //     } else {
        //         console.log(dragSize);
        //         that.drag.style.top = e.clientY + 'px';
        //         that.drag.style.left = e.clientX + 'px';
        //         console.log(e.clientX, e.clientY);
        //     }
        // }
        DragAble.prototype.mousedown = function() {

                const mousemove = (e) => {

                    var windowwidth = window.innerWidth - this.dragSize.width;
                    var windowheight = window.innerHeight - this.dragSize.height;
                    if (e.clientY > windowheight) {
                        this.drag.style.top = windowheight + 'px';
                    }
                    if (e.clientX > windowwidth) {
                        this.drag.style.left = windowwidth + 'px';
                    } else {
                        console.log(this.dragSize);
                        this.drag.style.top = e.clientY + 'px';
                        this.drag.style.left = e.clientX + 'px';
                        console.log(e.clientX, e.clientY);
                    }
                }

                this.mouseup = () => {
                    console.log("up", this)
                    document.removeEventListener('mousemove', mousemove);
                }
                console.log("dfsggs")
                    //console.log("t", t);
                console.log("外", this, "外")
                    //console.log(this.mousemove)
                document.addEventListener('mousemove', mousemove);
                document.addEventListener('mouseup', this.mouseup);






            }
            // DragAble.prototype.mouseup = function() {
            //     console.log("up")
            //     document.removeEventListener('mousemove', event);
            // }
        console.log(DragAble.prototype)

        new DragAble('#drag1');
        new DragAble('#drag2');
        // const drag = document.querySelector('#drag1');
        //获取盒子的属性



        //    drag.addEventListener('mousedown', () => {
        //         document.addEventListener('mousemove', event)


        //         document.addEventListener('mouseup', (e) => {
        //             document.removeEventListener('mousemove', event);


        //         })

        //     })
    </script>
</body>

</html>