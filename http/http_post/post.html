<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POSt前端页</title>
</head>

<body>

    前端界面
    <div style="background-color:pink; height: 100px; width: 100px;">

    </div>
    <script>
        // const xhr = new XMLHttpRequest();
        // xhr.open('POST', 'http://localhost:9090/getPost', true);
        // let str = ''
        //     // xhr.on('data', (chunk) => {
        //     //     str += chunk;
        //     // })
        //     // xhr.setRequestHeader('X-Real-IP', '211.161.244.70');
        //     //json
        //     //Content - Type: text / plain;
        //     //charset = UTF - 8 纯文本
        //     //MIME

        // xhr.timeout = 5000; //设置超时时间
        // xhr.addEventListener('timeout', function() { //监听超时
        //     console.log('timeout');
        // })
        // xhr.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');
        // xhr.addEventListener('readystatechange', function(event) {

        //     if (xhr.readyState === 4) { //当数据发送完  然后接收服务器端的数据
        //         const di = document.querySelector('div');
        //         console.log(xhr.response, xhr.status);
        //         //document.write(xhr.response)
        //         di.innerHTML = xhr.response
        //     }
        // })
        // xhr.send('235');

        function http(method, url, params = {}, headers = {}) {
            const xhr = new XMLHttpRequest();
            xhr.open(method, url, true);
            for (let k in headers) { //设置请求头
                xhr.setRequestHeader(k, headers[k])
            }
            let data = headers['Content-Type'] &&
                headers['Content-Type'] === 'application/json' ? JSON.stringify(params) : params

            xhr.addEventListener('readystatechange', function(event) { //数据接收

                if (xhr.readyState === 4) { //当数据发送完  然后接收服务器端的数据
                    const di = document.querySelector('div');
                    console.log(xhr.response, xhr.status);
                    //document.write(xhr.response)
                    di.innerHTML = xhr.response
                }
            })
            xhr.send(data)
        }
        http('POST', 'http://localhost:9090/getPost', {
            type: 'all',
            query: 'js'
        }, {
            //'X-Real-IP': '211.161.244.70',
            'Content-Type': 'application/json'
        })
    </script>
</body>

</html>